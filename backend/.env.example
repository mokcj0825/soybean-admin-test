# ===========================================
# Backend 本地开发环境变量配置示例
# ===========================================
# 使用说明：
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 确保 Docker 中的 PostgreSQL 和 Redis 已启动
# 3. 运行: pnpm run start:dev

# ===========================================
# 数据库配置 (连接 Docker 中的 PostgreSQL)
# ===========================================
# 使用 localhost 和外部端口连接 Docker 中的数据库
DATABASE_URL="postgresql://soybean:soybean@123.@localhost:25432/soybean-admin-nest-backend?schema=public"
DIRECT_DATABASE_URL="postgresql://soybean:soybean@123.@localhost:25432/soybean-admin-nest-backend?schema=public"

# 注意：
# - 使用 localhost（不是 postgres）
# - 使用 DATABASE_PORT（默认 25432，不是内部端口 5432）
# - 如果你修改了根目录 .env 中的 DATABASE_PORT，这里也要相应修改

# ===========================================
# Redis 配置 (连接 Docker 中的 Redis)
# ===========================================
# 使用 localhost 和外部端口连接 Docker 中的 Redis
REDIS_HOST=localhost
REDIS_PORT=26379
REDIS_PASSWORD=123456
REDIS_DB=1

# 注意：
# - 使用 localhost（不是 redis）
# - 使用 REDIS_PORT（默认 26379，不是内部端口 6379）
# - 如果你修改了根目录 .env 中的 REDIS_PORT，这里也要相应修改

# ===========================================
# 应用配置
# ===========================================
APP_PORT=9528
NODE_ENV=development
CASBIN_MODEL=model.conf

# ===========================================
# Swagger 文档配置
# ===========================================
DOC_SWAGGER_ENABLE=true
DOC_SWAGGER_PATH=api-docs

# ===========================================
# JWT 配置
# ===========================================
JWT_SECRET=JWT_SECRET-soybean-admin-nest@123456!@#.
JWT_EXPIRE_IN=3600
REFRESH_TOKEN_SECRET=REFRESH_TOKEN_EXPIRE_IN-soybean-admin-nest@123456!@#.
REFRESH_TOKEN_EXPIRE_IN=7200

# ===========================================
# 端口配置说明
# ===========================================
# 
# 本地开发模式端口对照：
# 
# PostgreSQL:
#   - Docker 内部端口: 5432 (容器间通信用)
#   - Docker 外部端口: 25432 (本地开发用) ← 你要用这个
#   - 连接字符串: localhost:25432
# 
# Redis:
#   - Docker 内部端口: 6379 (容器间通信用)
#   - Docker 外部端口: 26379 (本地开发用) ← 你要用这个
#   - 连接字符串: localhost:26379
#
# 详细说明请参考根目录的 DOCKER_NETWORKING_PORTS.md

# ===========================================
# 快速启动指南
# ===========================================
#
# 1. 启动 Docker 中的数据库和 Redis（不启动后端）
#    docker-compose up postgres redis -d
#
# 2. 复制并配置本地环境变量
#    cp .env.example .env
#
# 3. 安装依赖
#    pnpm install
#
# 4. 运行数据库迁移（如需要）
#    pnpm prisma:migrate:dev
#
# 5. 启动开发服务器
#    pnpm run start:dev
#
# 6. 访问 Swagger 文档
#    http://localhost:9528/api-docs
